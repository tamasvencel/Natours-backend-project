{"mappings":"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","sources":["<anon>","public/js/index.js","public/js/login.js","public/js/alerts.js","public/js/signup.js","public/js/map.js","public/js/updateUserData.js","public/js/stripe.js"],"sourcesContent":["require(\"@babel/polyfill\");\nvar $3AEMI$axios = require(\"axios\");\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n/* eslint-disable */ /*because it is configured for node.js */ \n/* eslint-disable */ /*because it is configured for node.js */ \n/* eslint-disable */ /*because it is configured for node.js */ // type is \"success\" or \"error\"\nconst $7dc87b7f457e655a$export$de026b00723010c1 = (type, msg)=>{\n    $7dc87b7f457e655a$export$516836c6a9dfc573();\n    const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n    document.querySelector(\"body\").insertAdjacentHTML(\"afterbegin\", markup);\n    window.setTimeout($7dc87b7f457e655a$export$516836c6a9dfc573, 5000);\n};\nconst $7dc87b7f457e655a$export$516836c6a9dfc573 = ()=>{\n    const el = document.querySelector(\".alert\");\n    if (el) el.parentElement.removeChild(el);\n};\n\n\nconst $bf5b431e6a69fea8$export$596d806903d1f59e = async (email, password)=>{\n    try {\n        const res = await (0, ($parcel$interopDefault($3AEMI$axios)))({\n            method: \"POST\",\n            url: \"/api/v1/users/login\",\n            data: {\n                email: email,\n                password: password\n            }\n        });\n        if (res.data.status === \"success\") {\n            (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"success\", \"Logged in successfully!\");\n            window.setTimeout(()=>{\n                location.assign(\"/\");\n            }, 1000);\n        }\n    } catch (err) {\n        (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"error\", err.response.data.message);\n    }\n};\nconst $bf5b431e6a69fea8$export$a0973bcfe11b05c9 = async ()=>{\n    try {\n        const res = await (0, ($parcel$interopDefault($3AEMI$axios)))({\n            method: \"GET\",\n            url: \"/api/v1/users/logout\"\n        });\n        // server reload\n        if (res.data.status === \"success\") location.assign(\"/\");\n    } catch (err) {\n        (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"error\", \"Error when logging out! Try again.\");\n    }\n};\n\n\n/* eslint-disable */ /*because it is configured for node.js */ \n\nconst $dbd1452def9256d5$export$7200a869094fec36 = async (name, email, password, passwordConfirm)=>{\n    try {\n        const res = await (0, ($parcel$interopDefault($3AEMI$axios)))({\n            method: \"POST\",\n            url: \"/api/v1/users/signup\",\n            data: {\n                name: name,\n                email: email,\n                password: password,\n                passwordConfirm: passwordConfirm\n            }\n        });\n        if (res.data.status === \"success\") {\n            (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"success\", \"Account created successfully!\");\n            window.setTimeout(()=>{\n                location.assign(\"/\");\n            }, 1000);\n        }\n    } catch (err) {\n        (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"error\", err.response.data.message);\n    }\n};\n\n\n/* eslint-disable */ /*because it is configured for node.js */ const $bc5a654fb3fe3dcf$export$4c5dd147b21b9176 = (locations)=>{\n    var map = L.map(\"map\", {\n        scrollWheelZoom: false,\n        zoomSnap: 0.25,\n        zoomControl: false\n    }).setView([\n        35.111745,\n        -120.113491\n    ], 4.75);\n    var customZoomControl = L.control.zoom({\n        position: \"topright\"\n    }).addTo(map);\n    // Modify the size of the zoom control buttons\n    var zoomInButton = customZoomControl._zoomInButton;\n    var zoomOutButton = customZoomControl._zoomOutButton;\n    // Change the width and height of the buttons\n    zoomInButton.style.width = \"40px\"; // Adjust the width as needed\n    zoomInButton.style.height = \"30px\"; // Adjust the height as needed\n    zoomOutButton.style.width = \"40px\"; // Adjust the width as needed\n    zoomOutButton.style.height = \"30px\"; // Adjust the height as needed\n    L.tileLayer(\"https://{s}.tile.thunderforest.com/pioneer/{z}/{x}/{y}.png?apikey=3678afbce85344c89a4b5070dcaf91d7\", {\n        attribution: '&copy; <a href=\"http://www.thunderforest.com/\">Thunderforest</a>, &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n        apikey: \"3678afbce85344c89a4b5070dcaf91d7\",\n        maxZoom: 15\n    }).addTo(map);\n    const bounds = new L.LatLngBounds();\n    locations.forEach((loc)=>{\n        // Create marker icon\n        const markerIcon = L.divIcon({\n            className: \"marker\",\n            iconAnchor: [\n                0,\n                45\n            ],\n            iconSize: [\n                32,\n                40\n            ]\n        });\n        const [lng, lat] = loc.coordinates;\n        // Create marker and add it to the map\n        const marker = L.marker([\n            lat,\n            lng\n        ], {\n            icon: markerIcon\n        }).addTo(map);\n        // Create a popup with custom options\n        var popup = L.popup({\n            offset: [\n                16.5,\n                -31\n            ]\n        }).setLatLng([\n            loc.coordinates[1],\n            loc.coordinates[0]\n        ]).setContent(`<p style=\"font-size: 14px;\">Day ${loc.day}: ${loc.description}</p>`);\n        // Add the popup to the Leaflet map\n        popup.addTo(map);\n        // Extend map bounds to include the current location\n        bounds.extend([\n            lat,\n            lng\n        ]);\n    });\n    var paddingOptions = {\n        paddingTopLeft: [\n            100,\n            200\n        ],\n        paddingBottomRight: [\n            100,\n            200\n        ]\n    };\n    map.fitBounds(bounds, paddingOptions);\n};\n\n\n/* eslint-disable */ /*because it is configured for node.js */ \n\nconst $3c9d2d69348dfae3$export$3bf0495508a61ee = async (data, type)=>{\n    try {\n        const url = type === \"password\" ? \"/api/v1/users/updatePassword\" : \"/api/v1/users/updateMe\";\n        const res = await (0, ($parcel$interopDefault($3AEMI$axios)))({\n            method: \"PATCH\",\n            url: url,\n            data: data\n        });\n        if (res.data.status === \"success\") {\n            (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"success\", `${type} updated successfully!`);\n            window.setTimeout(()=>{\n                location.reload();\n            }, 2000);\n        }\n    } catch (err) {\n        (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"error\", err.response.data.message);\n    }\n};\n\n\n/* eslint-disable */ /*because it is configured for node.js */ \n\nconst $9fd71c92b6f885af$var$stripe = Stripe(\"pk_test_51NojgRFcZkqRpT2CJ0r1RzZoCcA3epvhnDaGeIdykiwdQJK40yMMZVkHFCXdoEMRuWntNinHOAlUznlkSw4W35AP00ltUSEWQk\");\nconst $9fd71c92b6f885af$export$8d5bdbf26681c0c2 = async (tourId)=>{\n    try {\n        // 1. Get checkout session from API\n        const session = await (0, ($parcel$interopDefault($3AEMI$axios)))(`/api/v1/bookings/checkout-session/${tourId}`);\n        // 2. Create checkout form + charge credit card\n        await $9fd71c92b6f885af$var$stripe.redirectToCheckout({\n            sessionId: session.data.session.id\n        });\n    } catch (err) {\n        console.log(err);\n        (0, $7dc87b7f457e655a$export$de026b00723010c1)(\"error\", err);\n    }\n};\n\n\n// DOM ELEMENT\nconst $407eccdc61ba7a94$var$loginForm = document.querySelector(\".form--login\");\nconst $407eccdc61ba7a94$var$mapEl = document.getElementById(\"map\");\nconst $407eccdc61ba7a94$var$logOutBtn = document.querySelector(\".nav__el--logout\");\nconst $407eccdc61ba7a94$var$signUpForm = document.querySelector(\".form--signup\");\nconst $407eccdc61ba7a94$var$userDataForm = document.querySelector(\".form-user-data\");\nconst $407eccdc61ba7a94$var$userPasswordForm = document.querySelector(\".form-user-password\");\nconst $407eccdc61ba7a94$var$bookTourBtn = document.getElementById(\"book-tour\");\n// DELEGATION\nif ($407eccdc61ba7a94$var$mapEl) {\n    const locations = JSON.parse($407eccdc61ba7a94$var$mapEl.dataset.locations);\n    (0, $bc5a654fb3fe3dcf$export$4c5dd147b21b9176)(locations);\n}\nif ($407eccdc61ba7a94$var$loginForm) $407eccdc61ba7a94$var$loginForm.addEventListener(\"submit\", (e)=>{\n    const email = document.getElementById(\"email\").value;\n    const password = document.getElementById(\"password\").value;\n    e.preventDefault();\n    (0, $bf5b431e6a69fea8$export$596d806903d1f59e)(email, password);\n});\nif ($407eccdc61ba7a94$var$logOutBtn) $407eccdc61ba7a94$var$logOutBtn.addEventListener(\"click\", (0, $bf5b431e6a69fea8$export$a0973bcfe11b05c9));\nif ($407eccdc61ba7a94$var$signUpForm) $407eccdc61ba7a94$var$signUpForm.addEventListener(\"submit\", (e)=>{\n    const name = document.getElementById(\"name\").value;\n    const email = document.getElementById(\"email\").value;\n    const password = document.getElementById(\"password\").value;\n    const passwordConfirm = document.getElementById(\"passwordConfirm\").value;\n    e.preventDefault();\n    (0, $dbd1452def9256d5$export$7200a869094fec36)(name, email, password, passwordConfirm);\n});\nif ($407eccdc61ba7a94$var$userDataForm) $407eccdc61ba7a94$var$userDataForm.addEventListener(\"submit\", (e)=>{\n    e.preventDefault();\n    const form = new FormData();\n    form.append(\"name\", document.getElementById(\"name\").value);\n    form.append(\"email\", document.getElementById(\"email\").value);\n    form.append(\"photo\", document.getElementById(\"photo\").files[0]);\n    (0, $3c9d2d69348dfae3$export$3bf0495508a61ee)(form, \"data\");\n});\nif ($407eccdc61ba7a94$var$userPasswordForm) $407eccdc61ba7a94$var$userPasswordForm.addEventListener(\"submit\", async (e)=>{\n    e.preventDefault();\n    document.querySelector(\".btn--save-password\").textContent = \"Updating...\";\n    const passwordCurrent = document.getElementById(\"password-current\").value;\n    const password = document.getElementById(\"password\").value;\n    const passwordConfirm = document.getElementById(\"password-confirm\").value;\n    await (0, $3c9d2d69348dfae3$export$3bf0495508a61ee)({\n        passwordCurrent: passwordCurrent,\n        password: password,\n        passwordConfirm: passwordConfirm\n    }, \"password\");\n    document.querySelector(\".btn--save-password\").textContent = \"Save password\";\n    document.getElementById(\"password-current\").value = \"\";\n    document.getElementById(\"password\").value = \"\";\n    document.getElementById(\"password-confirm\").value = \"\";\n});\nif ($407eccdc61ba7a94$var$bookTourBtn) $407eccdc61ba7a94$var$bookTourBtn.addEventListener(\"click\", (e)=>{\n    e.target.textContent = \"Processing...\";\n    // e.target is the element which was clicked\n    const { tourId: tourId } = e.target.dataset;\n    (0, $9fd71c92b6f885af$export$8d5bdbf26681c0c2)(tourId);\n});\n\n\n//# sourceMappingURL=bundle.js.map\n","/* eslint-disable */ /*because it is configured for node.js */\r\n\r\nimport \"@babel/polyfill\";\r\nimport { login, logout } from \"./login\";\r\nimport { signup } from \"./signup\";\r\nimport { displayMap } from \"./map\";\r\nimport { updateData } from \"./updateUserData\";\r\nimport { bookTour } from \"./stripe\";\r\n\r\n// DOM ELEMENT\r\nconst loginForm = document.querySelector(\".form--login\");\r\nconst mapEl = document.getElementById(\"map\");\r\nconst logOutBtn = document.querySelector(\".nav__el--logout\");\r\nconst signUpForm = document.querySelector(\".form--signup\");\r\nconst userDataForm = document.querySelector(\".form-user-data\");\r\nconst userPasswordForm = document.querySelector(\".form-user-password\");\r\nconst bookTourBtn = document.getElementById(\"book-tour\");\r\n\r\n// DELEGATION\r\nif (mapEl) {\r\n  const locations = JSON.parse(mapEl.dataset.locations);\r\n  displayMap(locations);\r\n}\r\n\r\nif (loginForm) {\r\n  loginForm.addEventListener(\"submit\", (e) => {\r\n    const email = document.getElementById(\"email\").value;\r\n    const password = document.getElementById(\"password\").value;\r\n    e.preventDefault();\r\n    login(email, password);\r\n  });\r\n}\r\n\r\nif (logOutBtn) logOutBtn.addEventListener(\"click\", logout);\r\n\r\nif (signUpForm) {\r\n  signUpForm.addEventListener(\"submit\", (e) => {\r\n    const name = document.getElementById(\"name\").value;\r\n    const email = document.getElementById(\"email\").value;\r\n    const password = document.getElementById(\"password\").value;\r\n    const passwordConfirm = document.getElementById(\"passwordConfirm\").value;\r\n    e.preventDefault();\r\n    signup(name, email, password, passwordConfirm);\r\n  });\r\n}\r\n\r\nif (userDataForm)\r\n  userDataForm.addEventListener(\"submit\", (e) => {\r\n    e.preventDefault();\r\n    const form = new FormData();\r\n    form.append(\"name\", document.getElementById(\"name\").value);\r\n    form.append(\"email\", document.getElementById(\"email\").value);\r\n    form.append(\"photo\", document.getElementById(\"photo\").files[0]);\r\n\r\n    updateData(form, \"data\");\r\n  });\r\n\r\nif (userPasswordForm)\r\n  userPasswordForm.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n\r\n    document.querySelector(\".btn--save-password\").textContent = \"Updating...\";\r\n\r\n    const passwordCurrent = document.getElementById(\"password-current\").value;\r\n    const password = document.getElementById(\"password\").value;\r\n    const passwordConfirm = document.getElementById(\"password-confirm\").value;\r\n\r\n    await updateData(\r\n      { passwordCurrent, password, passwordConfirm },\r\n      \"password\"\r\n    );\r\n\r\n    document.querySelector(\".btn--save-password\").textContent = \"Save password\";\r\n\r\n    document.getElementById(\"password-current\").value = \"\";\r\n    document.getElementById(\"password\").value = \"\";\r\n    document.getElementById(\"password-confirm\").value = \"\";\r\n  });\r\n\r\nif (bookTourBtn)\r\n  bookTourBtn.addEventListener(\"click\", (e) => {\r\n    e.target.textContent = \"Processing...\";\r\n    // e.target is the element which was clicked\r\n    const { tourId } = e.target.dataset;\r\n    bookTour(tourId);\r\n  });\r\n","/* eslint-disable */ /*because it is configured for node.js */\r\n\r\nimport axios from \"axios\";\r\nimport { showAlert } from \"./alerts\";\r\n\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const res = await axios({\r\n      method: \"POST\",\r\n      url: \"/api/v1/users/login\",\r\n      data: {\r\n        email,\r\n        password,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === \"success\") {\r\n      showAlert(\"success\", \"Logged in successfully!\");\r\n      window.setTimeout(() => {\r\n        location.assign(\"/\");\r\n      }, 1000);\r\n    }\r\n  } catch (err) {\r\n    showAlert(\"error\", err.response.data.message);\r\n  }\r\n};\r\n\r\nexport const logout = async () => {\r\n  try {\r\n    const res = await axios({\r\n      method: \"GET\",\r\n      url: \"/api/v1/users/logout\",\r\n    });\r\n    // server reload\r\n    if (res.data.status === \"success\") location.assign(\"/\");\r\n  } catch (err) {\r\n    showAlert(\"error\", \"Error when logging out! Try again.\");\r\n  }\r\n};\r\n","/* eslint-disable */ /*because it is configured for node.js */\r\n\r\n// type is \"success\" or \"error\"\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector(\"body\").insertAdjacentHTML(\"afterbegin\", markup);\r\n\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector(\".alert\");\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n","/* eslint-disable */ /*because it is configured for node.js */\r\n\r\nimport axios from \"axios\";\r\nimport { showAlert } from \"./alerts\";\r\n\r\nexport const signup = async (name, email, password, passwordConfirm) => {\r\n  try {\r\n    const res = await axios({\r\n      method: \"POST\",\r\n      url: \"/api/v1/users/signup\",\r\n      data: {\r\n        name,\r\n        email,\r\n        password,\r\n        passwordConfirm,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === \"success\") {\r\n      showAlert(\"success\", \"Account created successfully!\");\r\n      window.setTimeout(() => {\r\n        location.assign(\"/\");\r\n      }, 1000);\r\n    }\r\n  } catch (err) {\r\n    showAlert(\"error\", err.response.data.message);\r\n  }\r\n};\r\n","/* eslint-disable */ /*because it is configured for node.js */\r\n\r\nexport const displayMap = (locations) => {\r\n  var map = L.map(\"map\", {\r\n    scrollWheelZoom: false,\r\n    zoomSnap: 0.25,\r\n    zoomControl: false,\r\n  }).setView([35.111745, -120.113491], 4.75);\r\n\r\n  var customZoomControl = L.control\r\n    .zoom({\r\n      position: \"topright\",\r\n    })\r\n    .addTo(map);\r\n\r\n  // Modify the size of the zoom control buttons\r\n  var zoomInButton = customZoomControl._zoomInButton;\r\n  var zoomOutButton = customZoomControl._zoomOutButton;\r\n\r\n  // Change the width and height of the buttons\r\n  zoomInButton.style.width = \"40px\"; // Adjust the width as needed\r\n  zoomInButton.style.height = \"30px\"; // Adjust the height as needed\r\n\r\n  zoomOutButton.style.width = \"40px\"; // Adjust the width as needed\r\n  zoomOutButton.style.height = \"30px\"; // Adjust the height as needed\r\n\r\n  L.tileLayer(\r\n    \"https://{s}.tile.thunderforest.com/pioneer/{z}/{x}/{y}.png?apikey=3678afbce85344c89a4b5070dcaf91d7\",\r\n    {\r\n      attribution:\r\n        '&copy; <a href=\"http://www.thunderforest.com/\">Thunderforest</a>, &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n      apikey: \"3678afbce85344c89a4b5070dcaf91d7\",\r\n      maxZoom: 15,\r\n    }\r\n  ).addTo(map);\r\n\r\n  const bounds = new L.LatLngBounds();\r\n\r\n  locations.forEach((loc) => {\r\n    // Create marker icon\r\n    const markerIcon = L.divIcon({\r\n      className: \"marker\",\r\n      iconAnchor: [0, 45], // Adjust the anchor point to align with the bottom\r\n      iconSize: [32, 40],\r\n    });\r\n\r\n    const [lng, lat] = loc.coordinates;\r\n\r\n    // Create marker and add it to the map\r\n    const marker = L.marker([lat, lng], { icon: markerIcon }).addTo(map);\r\n\r\n    // Create a popup with custom options\r\n    var popup = L.popup({ offset: [16.5, -31] })\r\n      .setLatLng([loc.coordinates[1], loc.coordinates[0]])\r\n      .setContent(\r\n        `<p style=\"font-size: 14px;\">Day ${loc.day}: ${loc.description}</p>`\r\n      );\r\n\r\n    // Add the popup to the Leaflet map\r\n    popup.addTo(map);\r\n\r\n    // Extend map bounds to include the current location\r\n    bounds.extend([lat, lng]);\r\n  });\r\n\r\n  var paddingOptions = {\r\n    paddingTopLeft: [100, 200],\r\n    paddingBottomRight: [100, 200],\r\n  };\r\n\r\n  map.fitBounds(bounds, paddingOptions);\r\n};\r\n","/* eslint-disable */ /*because it is configured for node.js */\r\n\r\nimport axios from \"axios\";\r\nimport { showAlert } from \"./alerts\";\r\n\r\n// type is either \"password\" or \"data\"\r\nexport const updateData = async (data, type) => {\r\n  try {\r\n    const url =\r\n      type === \"password\"\r\n        ? \"/api/v1/users/updatePassword\"\r\n        : \"/api/v1/users/updateMe\";\r\n\r\n    const res = await axios({\r\n      method: \"PATCH\",\r\n      url,\r\n      data,\r\n    });\r\n\r\n    if (res.data.status === \"success\") {\r\n      showAlert(\"success\", `${type} updated successfully!`);\r\n      window.setTimeout(() => {\r\n        location.reload();\r\n      }, 2000);\r\n    }\r\n  } catch (err) {\r\n    showAlert(\"error\", err.response.data.message);\r\n  }\r\n};\r\n","/* eslint-disable */ /*because it is configured for node.js */\r\nimport axios from \"axios\";\r\nimport { showAlert } from \"./alerts\";\r\n\r\nconst stripe = Stripe(\r\n  \"pk_test_51NojgRFcZkqRpT2CJ0r1RzZoCcA3epvhnDaGeIdykiwdQJK40yMMZVkHFCXdoEMRuWntNinHOAlUznlkSw4W35AP00ltUSEWQk\"\r\n);\r\n\r\nexport const bookTour = async (tourId) => {\r\n  try {\r\n    // 1. Get checkout session from API\r\n    const session = await axios(`/api/v1/bookings/checkout-session/${tourId}`);\r\n\r\n    // 2. Create checkout form + charge credit card\r\n    await stripe.redirectToCheckout({\r\n      sessionId: session.data.session.id,\r\n    });\r\n  } catch (err) {\r\n    console.log(err);\r\n    showAlert(\"error\", err);\r\n  }\r\n};\r\n"],"names":["require","$3AEMI$axios","$parcel$interopDefault","a","__esModule","default","$7dc87b7f457e655a$export$de026b00723010c1","type","msg","$7dc87b7f457e655a$export$516836c6a9dfc573","markup","document","querySelector","insertAdjacentHTML","window","setTimeout","el","parentElement","removeChild","$bf5b431e6a69fea8$export$596d806903d1f59e","email","password","res","method","url","data","status","location","assign","err","response","message","$bf5b431e6a69fea8$export$a0973bcfe11b05c9","$dbd1452def9256d5$export$7200a869094fec36","name","passwordConfirm","$3c9d2d69348dfae3$export$3bf0495508a61ee","reload","$9fd71c92b6f885af$var$stripe","Stripe","$9fd71c92b6f885af$export$8d5bdbf26681c0c2","tourId","session","redirectToCheckout","sessionId","id","console","log","$407eccdc61ba7a94$var$loginForm","$407eccdc61ba7a94$var$mapEl","getElementById","$407eccdc61ba7a94$var$logOutBtn","$407eccdc61ba7a94$var$signUpForm","$407eccdc61ba7a94$var$userDataForm","$407eccdc61ba7a94$var$userPasswordForm","$407eccdc61ba7a94$var$bookTourBtn","locations","JSON","parse","dataset","map","L","scrollWheelZoom","zoomSnap","zoomControl","setView","customZoomControl","control","zoom","position","addTo","zoomInButton","_zoomInButton","zoomOutButton","_zoomOutButton","style","width","height","tileLayer","attribution","apikey","maxZoom","bounds","LatLngBounds","forEach","loc","markerIcon","divIcon","className","iconAnchor","iconSize","lng","lat","coordinates","marker","icon","popup","offset","setLatLng","setContent","day","description","extend","fitBounds","paddingTopLeft","paddingBottomRight","addEventListener","e","value","preventDefault","form","FormData","append","files","textContent","passwordCurrent","target"],"version":3,"file":"bundle.js.map","sourceRoot":"../../"}